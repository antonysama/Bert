pip install tensorflow-gpu
pip install -U bert-serving-server bert-serving-client
gedit bert.py  # first time only, see below
python bert.py -model_dir /home/antony/environments/e/L-12_H-768_A-12/ -num_worker=4

#Error: The name tf.logging.ERROR is deprecated. Please use tf.compat.v1.logging.ERROR instead (see below):
#https://stackoverflow.com/questions/55081911/tensorflow-2-0-0-alpha0-tf-logging-set-verbosity:


#bert.py (script)
import logging
logging.getLogger("tensorflow").setLevel(logging.ERROR)
import sys

from bert_serving.server import BertServer
from bert_serving.server.helper import get_run_args


if __name__ == '__main__':
    args = get_run_args()
    server = BertServer(args)
    server.start()
    server.join()

#Exercises:
#on a new tab
python 
#imports
import tensorflow
import numpy as np

with BertClient(ip='192.168.0.10') as bc:
    doc_vecs = bc.encode(questions)

    while True:
        query = input(colored('your question: ', 'green'))
        query_vec = bc.encode([query])[0]
        # compute normalized dot product as score
        score = np.sum(query_vec * doc_vecs, axis=1) / np.linalg.norm(doc_vecs, axis=1)
        topk_idx = np.argsort(score)[::-1][:topk]
        print('top %d questions similar to "%s"' % (topk, colored(query, 'green')))
        for idx in topk_idx:
            print('> %s\t%s' % (colored('%.1f' % score[idx], 'cyan'), colored(questions[idx], 'yellow')))


#Reference 
https://bert-as-service.readthedocs.io/en/latest/tutorial/index.html (tutorials)
https://github.com/hanxiao/bert-as-service/blob/master/README.md (other bert e.g.s)
